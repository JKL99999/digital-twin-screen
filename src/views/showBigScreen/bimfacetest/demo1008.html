<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>设置默认背景图</title>
    <style media="screen">
        * {
            margin: 0;
            padding: 0;
        }

        html,
        body {
            height: 100%;
        }

        .main {
            display: flex;
            flex-direction: column;
            overflow: hidden;
            height: 100%;
            width: 100%;
        }

        .model {
            flex: 1;
        }
    </style>
    <!-- 引用BIMFACE的JavaScript显示组件库 -->
    <script src="https://static.bimface.com/api/BimfaceSDKLoader/BimfaceSDKLoader@latest-release.js" charset="utf-8">
    </script>
</head>

<body>
    <div class='main'>
        <!-- 定义DOM元素，用于在该DOM元素中显示模型或图纸 -->
        <div class='model' id="domId"></div>
    </div>

    <script type="text/javascript">
        let viewer3D;
        let app;
        let viewToken = 'aa06be3f22f245468a0dc17c5a78ec67';
        // 初始化显示组件
        let options = new BimfaceSDKLoaderConfig();
        options.viewToken = viewToken;
        BimfaceSDKLoader.load(options, successCallback, failureCallback);

        function successCallback(viewMetaData) {
            if (viewMetaData.viewType == "3DView") {
                // ======== 判断是否为3D模型 ========        
                // 获取DOM元素
                let dom4Show = document.getElementById('domId');
                let webAppConfig = new Glodon.Bimface.Application.WebApplication3DConfig();
                webAppConfig.domElement = dom4Show;
                // 设置全局单位
                webAppConfig.globalUnit = Glodon.Bimface.Common.Units.LengthUnits.Millimeter;
                //是否设置默认为全透明
                webAppConfig.backgroundColor = [{
                    color: new Glodon.Web.Graphics.Color(25, 28, 33, 0)
                }]
                // 创建WebApplication
                app = new Glodon.Bimface.Application.WebApplication3D(webAppConfig);
                // 添加待显示的模型
                app.addView(viewToken);
                // 从WebApplication获取viewer3D对象
                viewer3D = app.getViewer();
                // 监听添加view完成的事件
                viewer3D.addEventListener(Glodon.Bimface.Viewer.Viewer3DEvent.ViewAdded, function () {
                    // 调用viewer3D对象的Method，可以继续扩展功能
                    //自适应屏幕大小
                    document.querySelector('.bf-view').style.background =
                        "url('http://static.bimface.com/attach/aa1903ceb8be4406b91f7a9817bfd446_%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190417161941.jpg')";
                    document.querySelector('.bf-view').style.backgroundSize = "cover";
                    window.onresize = function () {
                        viewer3D.resize(document.documentElement.clientWidth, document.documentElement
                            .clientHeight);
                    }
                    // 渲染3D模型
                    viewer3D.render();
                });
            }
        }

        function failureCallback(error) {
            console.log(error);
        }
    </script>
</body>

</html>